<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para mi universo entero</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root {
    --pink: #ff4d6d;
}

body {
    margin: 0;
    background: #020205;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: 'Quicksand', sans-serif;
}

/* --- UNIVERSO ULTRA DETALLADO --- */
#universe {
    position: fixed;
    inset: 0;
    z-index: 0;
    background: #05050a;
}

/* Nebulosas cinematogr√°ficas */
.nebula {
    position: absolute;
    border-radius: 50%;
    filter: blur(120px);
    opacity: 0.35;
    mix-blend-mode: screen;
    animation: nebulaMove 30s infinite alternate ease-in-out;
}

@keyframes nebulaMove {
    from { transform: translate(0,0) scale(1); }
    to { transform: translate(100px, 50px) scale(1.2); }
}

/* El Planeta Gigante */
.jupiter {
    position: absolute;
    width: 600px;
    height: 600px;
    left: -150px;
    bottom: -50px;
    background: linear-gradient(135deg, #a36b4f 0%, #704231 20%, #4e342e 50%, #211513 80%, #0a0605 100%);
    border-radius: 50%;
    box-shadow: inset -40px -40px 100px rgba(0,0,0,0.9), 0 0 60px rgba(163, 107, 79, 0.15);
    z-index: 2;
}

.jupiter::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(-10deg, transparent, rgba(0,0,0,0.05) 10px, rgba(255,255,255,0.03) 20px, transparent 30px);
    opacity: 0.6;
}

/* Paisaje de Monta√±as Inferiores */
.mountains {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 25vh;
    background: #0a0a0e;
    clip-path: polygon(0% 100%, 0% 70%, 5% 75%, 15% 65%, 25% 80%, 35% 60%, 50% 75%, 65% 55%, 80% 85%, 90% 65%, 100% 75%, 100% 100%);
    z-index: 4;
}

.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle var(--d) infinite ease-in-out;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.4); }
}

/* --- TU SOBRE ROSA ORIGINAL --- */
.envelope-wrapper {
    position: relative;
    cursor: pointer;
    z-index: 10;
}

.envelope {
    position: relative;
    width: 320px;
    height: 200px;
    background: var(--pink);
    border-radius: 0 0 15px 15px;
    box-shadow: 0 25px 50px rgba(0,0,0,.7);
    transition: opacity .6s ease;
}

.envelope::before {
    content: "";
    position: absolute;
    top: 0; left: 0;
    border-left: 160px solid transparent;
    border-right: 160px solid transparent;
    border-top: 125px solid #ff758f;
    transform-origin: top;
    transition: transform .6s ease;
}

.envelope.open::before { transform: rotateX(180deg); }
.envelope.hide { opacity: 0; pointer-events: none; }

.to-text {
    position: absolute;
    bottom: 10px; right: 14px;
    color: white; font-size: 13px; font-style: italic; opacity: .9;
}

.heart-seal {
    position: absolute;
    top: 45%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 45px;
    animation: pulse 1.5s infinite;
}

@keyframes pulse { 50% { transform: translate(-50%, -50%) scale(1.15); } }

/* --- TU CARTA ORIGINAL --- */
.letter {
    position: absolute;
    bottom: 5px; left: 50%;
    transform: translateX(-50%);
    width: 320px; height: 150px;
    background: #fffafa;
    padding: 25px;
    border-radius: 12px;
    opacity: 0;
    z-index: 11;
    transition: all .9s cubic-bezier(.2,.8,.3,1.2);
    box-sizing: border-box;
}

.letter.reveal {
    bottom: 35px; height: 420px; opacity: 1;
    box-shadow: 0 0 40px rgba(255,255,255,.25);
}

.page { display: none; }
.page.active { display: block; animation: fadeIn .8s; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

h2 { font-family: 'Dancing Script', cursive; color: var(--pink); font-size: 2.2rem; margin-top: 0; }
.timer-display { background: #fff0f3; padding: 15px; border-radius: 15px; margin: 15px 0; font-weight: bold; color: var(--pink); }
.btn-next { background: var(--pink); color: #fff; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; }
.final-text { font-family: 'Dancing Script', cursive; font-size: 3rem; color: var(--pink); }
</style>
</head>

<body>

<div id="universe">
    <div class="nebula" style="width: 800px; height: 800px; background: #5000ca; top: -10%; left: -10%;"></div>
    <div class="nebula" style="width: 600px; height: 600px; background: #c0215a; top: 20%; right: -5%;"></div>
    <div class="jupiter"></div>
    <div class="mountains"></div>
</div>

<audio id="spaceSong" preload="auto" loop>
    <source src="Beach House - Space Song.mp3" type="audio/mpeg">
</audio>

<div class="envelope-wrapper" id="wrapper">
    <div class="envelope" id="envelope">
        <div class="heart-seal">‚ù§Ô∏è</div>
        <div class="to-text">Para Yadhara Karumi</div>
    </div>

    <div class="letter" id="letter">
        <div class="page active" id="p1">
            <h2>Mi vida contigo...</h2>
            <p>Desde el primer segundo supe que eras t√∫. El universo conspir√≥ para unirnos.</p>
            <div class="timer-display" id="timer"></div>
            <button class="btn-next" onclick="nextPage(event,2)">Siguiente ‚Üí</button>
        </div>

        <div class="page" id="p2">
            <h2>Nuestra historia</h2>
            <p>Eres mi paz, mi aventura y mi lugar seguro. No cambiar√≠a nada de nosotros.</p>
            <button class="btn-next" onclick="nextPage(event,3)">Mira esto ‚Üí</button>
        </div>

        <div class="page" id="p3">
            <div style="font-size:2rem;">‚ú®üåå‚ú®</div>
            <div class="final-text">¬°TE AMO MUCHO!</div>
            <p>Feliz San Valent√≠n üíñ</p>
            <div style="font-size:2rem;">üí´üöÄ</div>
        </div>
    </div>
</div>

<script>
/* FECHA ORIGINAL */
const START_DATE = new Date(2025, 11, 10, 15, 15, 45).getTime();

/* GENERAR ESTRELLAS */
const universe = document.getElementById('universe');
for (let i = 0; i < 300; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    s.style.left = Math.random() * 100 + '%';
    s.style.top = Math.random() * 100 + '%';
    const size = Math.random() * 2.5 + 0.5 + 'px';
    s.style.width = size;
    s.style.height = size;
    s.style.setProperty('--d', Math.random() * 5 + 2 + 's');
    universe.appendChild(s);
}

/* LOGICA DE APERTURA */
const wrapper = document.getElementById('wrapper');
const envelope = document.getElementById('envelope');
const letter = document.getElementById('letter');
const audio = document.getElementById('spaceSong');

let opened = false;
wrapper.addEventListener('click', () => {
    if (opened) return;
    opened = true;
    envelope.classList.add('open');
    setTimeout(() => {
        envelope.classList.add('hide');
        letter.classList.add('reveal');
    }, 600);
    
    // Reproducir m√∫sica al abrir
    audio.play().catch(e => console.log("Permiso de audio requerido"));
    
    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
});

function nextPage(e, n) {
    e.stopPropagation();
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('p' + n).classList.add('active');
}

function updateTimer() {
    const diff = Date.now() - START_DATE;
    const d = Math.floor(diff / 86400000);
    const h = Math.floor(diff % 86400000 / 3600000);
    const m = Math.floor(diff % 3600000 / 60000);
    const s = Math.floor(diff % 60000 / 1000);
    document.getElementById('timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateTimer, 1000);
updateTimer();
</script>

</body>
</html>