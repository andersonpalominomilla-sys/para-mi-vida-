<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para mi universo entero</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root {
    --pink: #ff4d6d;
}

body {
    margin: 0;
    background: #020205;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: 'Quicksand', sans-serif;
}

/* --- UNIVERSO ULTRA DETALLADO --- */
#universe {
    position: fixed;
    inset: 0;
    z-index: 0;
    background: #05050a;
}

/* Nebulosas cinematogr√°ficas */
.nebula {
    position: absolute;
    border-radius: 50%;
    filter: blur(120px);
    opacity: 0.35;
    mix-blend-mode: screen;
    animation: nebulaMove 30s infinite alternate ease-in-out;
}

@keyframes nebulaMove {
    from { transform: translate(0,0) scale(1); }
    to { transform: translate(100px, 50px) scale(1.2); }
}

/* El Planeta Gigante */
.jupiter {
    position: absolute;
    width: 600px;
    height: 600px;
    left: -150px;
    bottom: -50px;
    background: linear-gradient(135deg, #a36b4f 0%, #704231 20%, #4e342e 50%, #211513 80%, #0a0605 100%);
    border-radius: 50%;
    box-shadow: inset -40px -40px 100px rgba(0,0,0,0.9), 0 0 60px rgba(163, 107, 79, 0.15);
    z-index: 2;
}

.jupiter::before {
    content: "";
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(-10deg, transparent, rgba(0,0,0,0.05) 10px, rgba(255,255,255,0.03) 20px, transparent 30px);
    opacity: 0.6;
}

/* Paisaje de Monta√±as Inferiores */
.mountains {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 25vh;
    background: #0a0a0e;
    clip-path: polygon(0% 100%, 0% 70%, 5% 75%, 15% 65%, 25% 80%, 35% 60%, 50% 75%, 65% 55%, 80% 85%, 90% 65%, 100% 75%, 100% 100%);
    z-index: 4;
}

.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle var(--d) infinite ease-in-out;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.4); }
}

/* --- TU SOBRE ROSA ORIGINAL --- */
.envelope-wrapper {
    position: relative;
    cursor: pointer;
    z-index: 10;
}

.envelope {
    position: relative;
    width: 320px;
    height: 200px;
    background: var(--pink);
    border-radius: 0 0 15px 15px;
    box-shadow: 0 25px 50px rgba(0,0,0,.7);
    transition: opacity .6s ease;
}

.envelope::before {
    content: "";
    position: absolute;
    top: 0; left: 0;
    border-left: 160px solid transparent;
    border-right: 160px solid transparent;
    border-top: 125px solid #ff758f;
    transform-origin: top;
    transition: transform .6s ease;
}

.envelope.open::before { transform: rotateX(180deg); }
.envelope.hide { opacity: 0; pointer-events: none; }

.to-text {
    position: absolute;
    bottom: 10px; right: 14px;
    color: white; font-size: 13px; font-style: italic; opacity: .9;
}

.heart-seal {
    position: absolute;
    top: 45%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 45px;
    animation: pulse 1.5s infinite;
}

@keyframes pulse { 50% { transform: translate(-50%, -50%) scale(1.15); } }

/* --- TU CARTA ORIGINAL --- */
.letter {
    position: absolute;
    bottom: 5px; left: 50%;
    transform: translateX(-50%);
    width: 320px; height: 150px;
    background: #fffafa;
    padding: 25px;
    border-radius: 12px;
    opacity: 0;
    z-index: 11;
    transition: all .9s cubic-bezier(.2,.8,.3,1.2);
    box-sizing: border-box;
    /* Sombra para que destaque sobre las fotos */
    box-shadow: 0 0 40px rgba(255,255,255,.25);
}

.letter.reveal {
    bottom: 35px; height: 420px; opacity: 1;
}

.page { display: none; }
.page.active { display: block; animation: fadeIn .8s; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

h2 { font-family: 'Dancing Script', cursive; color: var(--pink); font-size: 2.2rem; margin-top: 0; }
.timer-display { background: #fff0f3; padding: 15px; border-radius: 15px; margin: 15px 0; font-weight: bold; color: var(--pink); }
.btn-next { background: var(--pink); color: #fff; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; font-weight: bold; }
.final-text { font-family: 'Dancing Script', cursive; font-size: 3rem; color: var(--pink); }

/* --- ESTILOS PARA LAS FOTOS FLOTANTES --- */
#photo-gallery {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; /* Click traspasa las fotos */
    z-index: 9; /* Debajo de la carta (11) pero sobre el fondo */
    opacity: 0;
    transition: opacity 2s ease;
}

#photo-gallery.visible {
    opacity: 1;
}

.memory-photo {
    position: absolute;
    width: 110px;
    height: auto;
    border: 4px solid #fff;
    border-radius: 6px;
    box-shadow: 0 4px 15px rgba(255, 77, 109, 0.5);
    object-fit: cover;
    opacity: 0;
    transform: scale(0.8);
    transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

#photo-gallery.visible .memory-photo {
    opacity: 0.95;
    transform: scale(1) rotate(var(--r));
}

@keyframes floatPhoto {
    0%, 100% { transform: translateY(0) rotate(var(--r)); }
    50% { transform: translateY(-15px) rotate(var(--r)); }
}

/* Posiciones espec√≠ficas */
.p1 { top: 10%; left: 15%; --r: -15deg; animation-delay: 0.1s; }
.p2 { top: 15%; right: 15%; --r: 12deg; animation-delay: 0.3s; }
.p3 { top: 40%; left: 5%; --r: -8deg; animation-delay: 0.5s; }
.p4 { top: 45%; right: 5%; --r: 10deg; animation-delay: 0.7s; }
.p5 { bottom: 15%; left: 20%; --r: -12deg; animation-delay: 0.9s; }
.p6 { bottom: 10%; right: 20%; --r: 15deg; animation-delay: 1.1s; }

/* Ajustes m√≥vil */
@media (max-width: 768px) {
    .memory-photo { width: 80px; border-width: 2px; }
    .p1 { top: 5%; left: 5%; }
    .p2 { top: 5%; right: 5%; }
    .p3 { top: 35%; left: 2%; }
    .p4 { top: 35%; right: 2%; }
    .p5 { bottom: 10%; left: 10%; }
    .p6 { bottom: 10%; right: 10%; }
}
</style>
</head>

<body>

<div id="universe">
    <div class="nebula" style="width: 800px; height: 800px; background: #5000ca; top: -10%; left: -10%;"></div>
    <div class="nebula" style="width: 600px; height: 600px; background: #c0215a; top: 20%; right: -5%;"></div>
    <div class="jupiter"></div>
    <div class="mountains"></div>
</div>

<div id="photo-gallery">
    <img src="foto1.jpeg" class="memory-photo p1" alt="Foto 1">
    <img src="foto2.jpeg" class="memory-photo p2" alt="Foto 2">
    <img src="foto3.jpeg" class="memory-photo p3" alt="Foto 3">
    <img src="foto4.jpeg" class="memory-photo p4" alt="Foto 4">
    <img src="foto5.jpeg" class="memory-photo p5" alt="Foto 5">
    <img src="foto6.jpeg" class="memory-photo p6" alt="Foto 6">
</div>

<audio id="spaceSong" preload="auto" loop>
    <source src="Beach House - Space Song.mp3" type="audio/mpeg">
</audio>

<div class="envelope-wrapper" id="wrapper">
    <div class="envelope" id="envelope">
        <div class="heart-seal">‚ù§Ô∏è</div>
        <div class="to-text">Para Yadhara Karumi</div>
    </div>

    <div class="letter" id="letter">
        <div class="page active" id="p1">
            <h2>Mi vida contigo...</h2>
            <p>Desde el primer segundo supe que eras t√∫, en un mundo lleno de coincidencias, lo nuestro se siente como un destino escrito con tinta de oro, no solo eres una persona en mi vida, eres alguien muy muy especial, eres el eje sobre el cual mi mundo decidi√≥ girar con m√°s fuerza llevamos este tiempo juntos y lo valoro mucho... </p>
            <div class="timer-display" id="timer"></div>
            <button class="btn-next" onclick="nextPage(event,2)">Siguiente ‚Üí</button>
        </div>

        <div class="page" id="p2">
            <h2>Nuestra historia</h2>
            <p>Eres mi paz, se que nuestro viaje ha sido la aventura m√°s incre√≠ble de mi existencia. Miro hacia atr√°s y veo cada detalle, esa primera vez donde nos conocimos en el bus de la universidad un miercoles 5 de noviembre, cada recuerdo cada salida aunque fueron pocas valore cada dia junto a ti, me encanta como eres, cada detalle sea bueno o malo siempre me quedo boca abierta mirandote, te dije quiero una vida contigo y quiero que seas solo tu y nadie mas te amo gracias por todo. 
            <button class="btn-next" onclick="nextPage(event,3)">Mira esto ‚Üí</button>
        </div>

        <div class="page" id="p3">
            <div style="font-size:2rem;">‚ú®üåå‚ú®üåπ</div>
            <div class="final-text">¬°TE AMO MUCHISIMO!</div>
            <p>Feliz San Valent√≠n üíñ... espero que te guste, tu y yo hasta donde me permitas mi ni√±a. </p>
            <div style="font-size:2rem;">üí´üöÄüíãüíï</div>
        </div>
    </div>
</div>

<script>
/* FECHA ORIGINAL */
const START_DATE = new Date(2025, 11, 10, 15, 15, 45).getTime();

/* GENERAR ESTRELLAS */
const universe = document.getElementById('universe');
for (let i = 0; i < 300; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    s.style.left = Math.random() * 100 + '%';
    s.style.top = Math.random() * 100 + '%';
    const size = Math.random() * 2.5 + 0.5 + 'px';
    s.style.width = size;
    s.style.height = size;
    s.style.setProperty('--d', Math.random() * 5 + 2 + 's');
    universe.appendChild(s);
}

/* LOGICA DE APERTURA */
const wrapper = document.getElementById('wrapper');
const envelope = document.getElementById('envelope');
const letter = document.getElementById('letter');
const audio = document.getElementById('spaceSong');

let opened = false;
wrapper.addEventListener('click', () => {
    if (opened) return;
    opened = true;
    envelope.classList.add('open');
    setTimeout(() => {
        envelope.classList.add('hide');
        letter.classList.add('reveal');
    }, 600);
    
    // Reproducir m√∫sica al abrir
    audio.play().catch(e => console.log("Permiso de audio requerido"));
    
    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
});

/* CAMBIO DE P√ÅGINA Y ACTIVACI√ìN DE FOTOS */
function nextPage(e, n) {
    e.stopPropagation();
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('p' + n).classList.add('active');

    // Si es la p√°gina 3, mostrar fotos y lanzar confeti
    if (n === 3) {
        document.getElementById('photo-gallery').classList.add('visible');
        setTimeout(() => {
             confetti({ particleCount: 200, spread: 100, origin: { y: 0.7 }, colors: ['#ff4d6d', '#ffffff'] });
        }, 500);
    }
}

function updateTimer() {
    const diff = Date.now() - START_DATE;
    const d = Math.floor(diff / 86400000);
    const h = Math.floor(diff % 86400000 / 3600000);
    const m = Math.floor(diff % 3600000 / 60000);
    const s = Math.floor(diff % 60000 / 1000);
    document.getElementById('timer').textContent = `${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateTimer, 1000);
updateTimer();
</script>

</body>
</html>